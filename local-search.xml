<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>数据库恢复</title>
    <link href="/2021/05/05/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D/"/>
    <url>/2021/05/05/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%81%A2%E5%A4%8D/</url>
    
    <content type="html"><![CDATA[<h4 id="数据库启动过程"><a href="#数据库启动过程" class="headerlink" title="数据库启动过程"></a>数据库启动过程</h4><p><img src="https://cdn.oracletutorial.com/wp-content/uploads/2019/07/Oracle-Startup-Stages.png" alt="Oracle Startup Stages"></p><h5 id="启动数据库到NOMOUNT状态"><a href="#启动数据库到NOMOUNT状态" class="headerlink" title="启动数据库到NOMOUNT状态"></a>启动数据库到NOMOUNT状态</h5><p>启动数据库到NOMOUNT状态时，只需要拥有一个参数文件就可以启动实例，不需要控制文件和数据文件的参与；</p><p>通过参数文件中的设置，创建实例，分配内存，启动后台进程，即可启动数据库到NOMOUNT状态。</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 数据库关闭状态下查看后台进程</span>[oracle<span class="hljs-variable">@test</span> dbs]$ sqlplus <span class="hljs-operator">/</span> <span class="hljs-keyword">as</span> sysdba<span class="hljs-keyword">SQL</span><span class="hljs-operator">*</span>Plus: <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> Production <span class="hljs-keyword">on</span> Tue Sep <span class="hljs-number">8</span> <span class="hljs-number">20</span>:<span class="hljs-number">35</span>:<span class="hljs-number">17</span> <span class="hljs-number">2020</span>Copyright (c) <span class="hljs-number">1982</span>, <span class="hljs-number">2016</span>, Oracle.  <span class="hljs-keyword">All</span> rights reserved.Connected <span class="hljs-keyword">to</span>:Oracle Database <span class="hljs-number">12</span>c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> <span class="hljs-operator">-</span> <span class="hljs-number">64</span>bit Production<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> shutdown immediateDatabase closed.Database dismounted.ORACLE instance shut down.[oracle<span class="hljs-variable">@test</span> dbs]$ ps <span class="hljs-operator">-</span>ef<span class="hljs-operator">|</span>grep ora_oracle    <span class="hljs-number">40527</span>  <span class="hljs-number">39063</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">36</span> pts<span class="hljs-operator">/</span><span class="hljs-number">4</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> grep <span class="hljs-comment">--color=auto ora_</span>[oracle<span class="hljs-variable">@test</span> dbs]$<span class="hljs-comment">-- 可以看到此时只有grep进程本身，并没有oracle相关进程</span><span class="hljs-comment">-- 启动数据库到NOMOUNT状态，再查看后台进程</span><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORACLE instance started.Total <span class="hljs-keyword">System</span> <span class="hljs-keyword">Global</span> Area <span class="hljs-number">1660944384</span> bytesFixed Size                  <span class="hljs-number">8793448</span> bytesVariable Size            <span class="hljs-number">1056965272</span> bytesDatabase Buffers          <span class="hljs-number">587202560</span> bytesRedo Buffers                <span class="hljs-number">7983104</span> bytes<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span>[oracle<span class="hljs-variable">@test</span> dbs]$ ps <span class="hljs-operator">-</span>ef<span class="hljs-operator">|</span>grep ora_oracle    <span class="hljs-number">40741</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_pmon_PROD1oracle    <span class="hljs-number">40743</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_clmn_PROD1oracle    <span class="hljs-number">40745</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_psp0_PROD1oracle    <span class="hljs-number">40747</span>      <span class="hljs-number">1</span> <span class="hljs-number">14</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">02</span> ora_vktm_PROD1oracle    <span class="hljs-number">40751</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_gen0_PROD1oracle    <span class="hljs-number">40753</span>      <span class="hljs-number">1</span>  <span class="hljs-number">1</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_mman_PROD1oracle    <span class="hljs-number">40757</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_gen1_PROD1oracle    <span class="hljs-number">40761</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_diag_PROD1oracle    <span class="hljs-number">40764</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_ofsd_PROD1oracle    <span class="hljs-number">40768</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_dbrm_PROD1oracle    <span class="hljs-number">40770</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_vkrm_PROD1oracle    <span class="hljs-number">40772</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_svcb_PROD1oracle    <span class="hljs-number">40774</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_pman_PROD1oracle    <span class="hljs-number">40777</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_dia0_PROD1oracle    <span class="hljs-number">40779</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_dbw0_PROD1oracle    <span class="hljs-number">40781</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_lgwr_PROD1oracle    <span class="hljs-number">40783</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_ckpt_PROD1oracle    <span class="hljs-number">40785</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_smon_PROD1oracle    <span class="hljs-number">40788</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_smco_PROD1oracle    <span class="hljs-number">40790</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_reco_PROD1oracle    <span class="hljs-number">40792</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_w000_PROD1oracle    <span class="hljs-number">40797</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_lreg_PROD1oracle    <span class="hljs-number">40803</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_w001_PROD1oracle    <span class="hljs-number">40806</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_pxmn_PROD1oracle    <span class="hljs-number">40810</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_mmon_PROD1oracle    <span class="hljs-number">40813</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_mmnl_PROD1oracle    <span class="hljs-number">40815</span>      <span class="hljs-number">1</span>  <span class="hljs-number">1</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_d000_PROD1oracle    <span class="hljs-number">40818</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_s000_PROD1oracle    <span class="hljs-number">40820</span>      <span class="hljs-number">1</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> ?        <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> ora_tmon_PROD1oracle    <span class="hljs-number">40862</span>  <span class="hljs-number">39063</span>  <span class="hljs-number">0</span> <span class="hljs-number">20</span>:<span class="hljs-number">37</span> pts<span class="hljs-operator">/</span><span class="hljs-number">4</span>    <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> grep <span class="hljs-comment">--color=auto ora_</span>[oracle<span class="hljs-variable">@test</span> dbs]$</code></pre></div><p>可以看到，Oracle根据参数文件的内容，创建并启动了实例，分配了内存区域，启动了后台进程。</p><p>还可以通过查看告警日志来观察数据的启动过程：</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 查看告警日志文件目录</span><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">from</span> v$diag_info;   INST_ID NAME                           <span class="hljs-keyword">VALUE</span>                                                                 CON_ID<span class="hljs-comment">---------- ------------------------------ ----------------------------------------------------------------- ----------</span>         <span class="hljs-number">1</span> Diag Enabled                   <span class="hljs-literal">TRUE</span>                                                                       <span class="hljs-number">0</span>         <span class="hljs-number">1</span> ADR Base                       <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle                                                            <span class="hljs-number">0</span>         <span class="hljs-number">1</span> ADR Home                       <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1                                      <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Diag Trace                     <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>trace                                <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Diag Alert                     <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>alert                                <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Diag Incident                  <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>incident                             <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Diag Cdump                     <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>cdump                                <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Health Monitor                 <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>hm                                   <span class="hljs-number">0</span>         <span class="hljs-number">1</span> <span class="hljs-keyword">Default</span> Trace File             <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>diag<span class="hljs-operator">/</span>rdbms<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>PROD1<span class="hljs-operator">/</span>trace<span class="hljs-operator">/</span>PROD1_ora_46040.trc            <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Active Problem Count           <span class="hljs-number">0</span>                                                                          <span class="hljs-number">0</span>         <span class="hljs-number">1</span> Active Incident Count          <span class="hljs-number">0</span>                                                                          <span class="hljs-number">0</span><span class="hljs-number">11</span> <span class="hljs-keyword">rows</span> selected.</code></pre></div><p>Diag Trace对应的目录为文本格式的告警日志文件所在的目录，Diag Alert对应的目录为XML格式的警告日志</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.838682</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>Starting ORACLE instance (normal) (OS id: <span class="hljs-number">45543</span>) <span class="hljs-comment">-- 实例启动</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.841278</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>CLI notifier numLatches:<span class="hljs-number">3</span> maxDescs:<span class="hljs-number">519</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.848696</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.848767</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>Dump <span class="hljs-keyword">of</span> <span class="hljs-keyword">system</span> resources acquired <span class="hljs-keyword">for</span> SHARED <span class="hljs-keyword">GLOBAL</span> AREA (SGA)<span class="hljs-comment">-- 内存分配</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.848965</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> <span class="hljs-keyword">Per</span> process <span class="hljs-keyword">system</span> memlock (soft) limit <span class="hljs-operator">=</span> UNLIMITED<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849038</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> Expected <span class="hljs-keyword">per</span> process <span class="hljs-keyword">system</span> memlock (soft) limit <span class="hljs-keyword">to</span> lock SHARED <span class="hljs-keyword">GLOBAL</span> AREA (SGA) <span class="hljs-keyword">into</span> memory: <span class="hljs-number">1584</span>M<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849158</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> Available <span class="hljs-keyword">system</span> pagesizes:  <span class="hljs-number">4</span>K, <span class="hljs-number">2048</span>K<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849284</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> Supported <span class="hljs-keyword">system</span> pagesize(s):<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849344</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>  PAGESIZE  AVAILABLE_PAGES  EXPECTED_PAGES  ALLOCATED_PAGES  ERROR(s)<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849405</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>        <span class="hljs-number">4</span>K       Configured          <span class="hljs-number">405507</span>          <span class="hljs-number">405507</span>        <span class="hljs-keyword">NONE</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849465</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span> Reason <span class="hljs-keyword">for</span> <span class="hljs-keyword">not</span> supporting certain <span class="hljs-keyword">system</span> pagesizes:<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849525</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>  <span class="hljs-number">2048</span>K <span class="hljs-operator">-</span> <span class="hljs-keyword">Dynamic</span> <span class="hljs-keyword">allocate</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">free</span> memory regions<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">49.849585</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span><span class="hljs-operator">*</span>LICENSE_MAX_SESSION <span class="hljs-operator">=</span> <span class="hljs-number">0</span>LICENSE_SESSIONS_WARNING <span class="hljs-operator">=</span> <span class="hljs-number">0</span><span class="hljs-keyword">Initial</span> number <span class="hljs-keyword">of</span> CPU <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>Number <span class="hljs-keyword">of</span> processor cores <span class="hljs-keyword">in</span> the <span class="hljs-keyword">system</span> <span class="hljs-keyword">is</span> <span class="hljs-number">1</span>Number <span class="hljs-keyword">of</span> processor sockets <span class="hljs-keyword">in</span> the <span class="hljs-keyword">system</span> <span class="hljs-keyword">is</span> <span class="hljs-number">1</span><span class="hljs-keyword">Using</span> LOG_ARCHIVE_DEST_1 <span class="hljs-keyword">parameter</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">as</span> USE_DB_RECOVERY_FILE_DESTAutotune <span class="hljs-keyword">of</span> undo retention <span class="hljs-keyword">is</span> turned on.IMODE<span class="hljs-operator">=</span>BRILAT <span class="hljs-operator">=</span><span class="hljs-number">51</span>LICENSE_MAX_USERS <span class="hljs-operator">=</span> <span class="hljs-number">0</span>SYS auditing <span class="hljs-keyword">is</span> enabledNOTE: remote asm mode <span class="hljs-keyword">is</span> <span class="hljs-keyword">local</span> (mode <span class="hljs-number">0x1</span>; <span class="hljs-keyword">from</span> cluster type)NOTE: <span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> ASM root directory ASMNOTE: Cluster configuration type <span class="hljs-operator">=</span> <span class="hljs-keyword">NONE</span> [<span class="hljs-number">2</span>]Oracle Database <span class="hljs-number">12</span>c Enterprise Edition <span class="hljs-keyword">Release</span> <span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span> <span class="hljs-operator">-</span> <span class="hljs-number">64</span>bit Production.ORACLE_HOME:    <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>product<span class="hljs-operator">/</span><span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-operator">/</span>db_1<span class="hljs-keyword">System</span> name:    LinuxNode name:      test<span class="hljs-keyword">Release</span>:        <span class="hljs-number">3.10</span><span class="hljs-number">.0</span><span class="hljs-number">-957.</span>el7.x86_64Version:        #<span class="hljs-number">1</span> SMP Thu Oct <span class="hljs-number">4</span> <span class="hljs-number">20</span>:<span class="hljs-number">48</span>:<span class="hljs-number">51</span> UTC <span class="hljs-number">2018</span>Machine:        x86_64<span class="hljs-keyword">Using</span> <span class="hljs-keyword">parameter</span> settings <span class="hljs-keyword">in</span> server<span class="hljs-operator">-</span>side spfile <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>product<span class="hljs-operator">/</span><span class="hljs-number">12.2</span><span class="hljs-number">.0</span><span class="hljs-operator">/</span>db_1<span class="hljs-operator">/</span>dbs<span class="hljs-operator">/</span>spfilePROD1.ora<span class="hljs-comment">--使用该参数文件中的内容进行参数配置</span><span class="hljs-keyword">System</span> parameters <span class="hljs-keyword">with</span> non<span class="hljs-operator">-</span><span class="hljs-keyword">default</span> <span class="hljs-keyword">values</span>:  processes                <span class="hljs-operator">=</span> <span class="hljs-number">300</span>  nls_language             <span class="hljs-operator">=</span> &quot;AMERICAN&quot;  nls_territory            <span class="hljs-operator">=</span> &quot;AMERICA&quot;  memory_target            <span class="hljs-operator">=</span> <span class="hljs-number">1584</span>M  control_files            <span class="hljs-operator">=</span> &quot;/u01/app/oracle/oradata/orcl/control01.ctl&quot;  control_files            <span class="hljs-operator">=</span> &quot;/u01/app/oracle/fast_recovery_area/orcl/control02.ctl&quot;  db_block_size            <span class="hljs-operator">=</span> <span class="hljs-number">8192</span>  compatible               <span class="hljs-operator">=</span> &quot;12.2.0&quot;  log_archive_format       <span class="hljs-operator">=</span> &quot;%t_%s_%r.dbf&quot;  db_recovery_file_dest    <span class="hljs-operator">=</span> &quot;/u01/app/oracle/fast_recovery_area/orcl&quot;  db_recovery_file_dest_size<span class="hljs-operator">=</span> <span class="hljs-number">15162</span>M  undo_tablespace          <span class="hljs-operator">=</span> &quot;UNDOTBS1&quot;  remote_login_passwordfile<span class="hljs-operator">=</span> &quot;EXCLUSIVE&quot;  dispatchers              <span class="hljs-operator">=</span> &quot;(PROTOCOL=TCP) (SERVICE=PROD1XDB)&quot;  audit_file_dest          <span class="hljs-operator">=</span> &quot;/u01/app/oracle/admin/orcl/adump&quot;  audit_trail              <span class="hljs-operator">=</span> &quot;DB&quot;  db_name                  <span class="hljs-operator">=</span> &quot;orcl&quot;  open_cursors             <span class="hljs-operator">=</span> <span class="hljs-number">300</span>  diagnostic_dest          <span class="hljs-operator">=</span> &quot;/u01/app/oracle&quot;  enable_pluggable_database<span class="hljs-operator">=</span> <span class="hljs-literal">TRUE</span>NOTE: remote asm mode <span class="hljs-keyword">is</span> <span class="hljs-keyword">local</span> (mode <span class="hljs-number">0x1</span>; <span class="hljs-keyword">from</span> cluster type)<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.834473</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>NOTE: PatchLevel <span class="hljs-keyword">of</span> this instance <span class="hljs-number">0</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-comment">-- 启动相应的后台进程</span>Starting background process PMON<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.862517</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>PMON started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">2</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45972</span>Starting background process CLMN<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.885022</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>CLMN started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">3</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45974</span>Starting background process PSP0<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.912378</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>PSP0 started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">4</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45976</span>Starting background process VKTM<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.936053</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>VKTM started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">5</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45978</span> <span class="hljs-keyword">at</span> elevated (RT) priority<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.938169</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>VKTM <span class="hljs-keyword">running</span> <span class="hljs-keyword">at</span> (<span class="hljs-number">1</span>)millisec <span class="hljs-keyword">precision</span> <span class="hljs-keyword">with</span> DBRM quantum (<span class="hljs-number">100</span>)msStarting background process GEN0<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.968777</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>GEN0 started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">6</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45982</span>Starting background process MMAN<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">50.996345</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>MMAN started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">7</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45984</span>Starting background process GEN1Starting background process DIAG<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.167858</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>GEN1 started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">9</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45988</span>_45990<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.246689</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>DIAG started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">11</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45992</span>Starting background process OFSD<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.317395</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>OFSD started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">12</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45994</span>_45996Starting background process DBRM<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.324508</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>Oracle <span class="hljs-keyword">running</span> <span class="hljs-keyword">with</span> ofslib:<span class="hljs-string">&#x27;Oracle File Server Library&#x27;</span> version<span class="hljs-operator">=</span><span class="hljs-number">2</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.376002</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>DBRM started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">14</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">45998</span>Starting background process VKRM<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.433063</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>VKRM started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">15</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46000</span>Starting background process SVCB<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.490207</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>SVCB started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">16</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46002</span>Starting background process PMAN<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.551573</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>PMAN started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">17</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46004</span>Starting background process DIA0Starting background process DBW0<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.595467</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>DIA0 started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">18</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46006</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.664173</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>DBW0 started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">19</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46008</span>Starting background process LGWR<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.721398</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>LGWR started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">8</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46010</span>Starting background process CKPT<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.751897</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>CKPT started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">20</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46012</span>Starting background process SMON<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.774554</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>SMON started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">21</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46015</span>Starting background process SMCO<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.792262</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>SMCO started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">22</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46017</span>Starting background process RECO<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.826931</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>RECO started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">24</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46021</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.846786</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>Starting background process LREG<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.863246</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>LREG started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">26</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46025</span>Starting background process PXMN<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.886456</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>PXMN started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">27</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46027</span>Starting background process FENC<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.907840</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>FENC started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">28</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46029</span>Starting background process MMON<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.950782</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>MMON started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">29</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46031</span>Starting background process MMNL<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.973493</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>MMNL started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">28</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46033</span><span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">51.974768</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>starting up <span class="hljs-number">1</span> dispatcher(s) <span class="hljs-keyword">for</span> network address <span class="hljs-string">&#x27;(ADDRESS=(PARTIAL=YES)(PROTOCOL=TCP))&#x27;</span>...starting up <span class="hljs-number">1</span> shared server(s) ...Starting background process TMON<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">52.041334</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span>TMON started <span class="hljs-keyword">with</span> pid<span class="hljs-operator">=</span><span class="hljs-number">32</span>, OS id<span class="hljs-operator">=</span><span class="hljs-number">46039</span>ORACLE_BASE <span class="hljs-keyword">from</span> environment <span class="hljs-operator">=</span> <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-number">2020</span><span class="hljs-number">-09</span><span class="hljs-number">-08</span>T21:<span class="hljs-number">03</span>:<span class="hljs-number">54.382148</span><span class="hljs-operator">+</span><span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-keyword">Using</span> <span class="hljs-keyword">default</span> pga_aggregate_limit <span class="hljs-keyword">of</span> <span class="hljs-number">2048</span> MB</code></pre></div><p>Oracle对于参数文件的选择也有一定的顺序，首先选择spfile<SID>.ora作为参数文件，当没有找到这个文件时，就会选择spfile.ora文件，最后，如果这两个文件都没有，就会选择init<SID>.ora文件，如果这三个文件都没有，那么就无法创建和启动实例。</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> <span class="hljs-keyword">parameter</span> spfileNAME                                 TYPE                   <span class="hljs-keyword">VALUE</span><span class="hljs-comment">------------------------------------ ---------------------- ------------------------------</span>spfile                               string                 <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>product<span class="hljs-operator">/</span><span class="hljs-number">12.2</span><span class="hljs-number">.0</span>                                                            <span class="hljs-operator">/</span>db_1<span class="hljs-operator">/</span>dbs<span class="hljs-operator">/</span>spfilePROD1.ora</code></pre></div><p>当前用的是spfile<SID>.ora文件</p><p>将该文件更名，再启动数据库看看</p><div class="hljs code-wrapper"><pre><code class="hljs sql">[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  lkORCL  orapwPROD1  snapcf_PROD1.f  spfilePROD1.ora[oracle<span class="hljs-variable">@test</span> dbs]$ mv spfilePROD1.ora spfilePROD1.ora.bak[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  lkORCL  orapwPROD1  snapcf_PROD1.f  spfilePROD1.ora.bak<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORA<span class="hljs-number">-01078</span>: failure <span class="hljs-keyword">in</span> processing <span class="hljs-keyword">system</span> parametersLRM<span class="hljs-number">-00109</span>: could <span class="hljs-keyword">not</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">parameter</span> file <span class="hljs-string">&#x27;/u01/app/oracle/product/12.2.0/db_1/dbs/initPROD1.ora&#x27;</span><span class="hljs-comment">-- 此时因为dbs目录下没有spfile.ora和init&lt;SID&gt;.ora文件，Oracle没有找到这三个文件，所以无法创建和启动实例</span><span class="hljs-comment">-- 创建一个spfile.ora文件和init&lt;SID&gt;.ora文件</span>[oracle<span class="hljs-variable">@test</span> dbs]$ cp spfilePROD1.ora spfile.ora[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  lkORCL  orapwPROD1  snapcf_PROD1.f  spfile.ora  spfilePROD1.ora[oracle<span class="hljs-variable">@test</span> dbs]$ cp init.ora initPROD1.ora[oracle<span class="hljs-variable">@test</span> dbs]$ mv spfilePROD1.ora spfilePROD1.ora.bak[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  initPROD1.ora  lkORCL  orapwPROD1  snapcf_PROD1.f  spfile.ora  spfilePROD1.ora.bak<span class="hljs-comment">-- 此时有一个spfile.ora和一个init&lt;SID&gt;.ora文件</span><span class="hljs-comment">--启动数据库</span><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORACLE instance started.Total <span class="hljs-keyword">System</span> <span class="hljs-keyword">Global</span> Area <span class="hljs-number">1660944384</span> bytesFixed Size                  <span class="hljs-number">8793448</span> bytesVariable Size            <span class="hljs-number">1056965272</span> bytesDatabase Buffers          <span class="hljs-number">587202560</span> bytesRedo Buffers                <span class="hljs-number">7983104</span> bytes<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> <span class="hljs-keyword">parameter</span> spfileNAME                                 TYPE                   <span class="hljs-keyword">VALUE</span><span class="hljs-comment">------------------------------------ ---------------------- ------------------------------</span>spfile                               string                 <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>product<span class="hljs-operator">/</span><span class="hljs-number">12.2</span><span class="hljs-number">.0</span>                                                            <span class="hljs-operator">/</span>db_1<span class="hljs-operator">/</span>dbs<span class="hljs-operator">/</span>spfile.ora<span class="hljs-comment">--此时可以看到使用的是spfile.ora文件</span><span class="hljs-comment">-- 将spfile.ora文件更名再启动数据库</span>[oracle<span class="hljs-variable">@test</span> dbs]$ mv spfile.ora spfile.ora.bak[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  initPROD1.ora  lkORCL  orapwPROD1  snapcf_PROD1.f  spfile.ora.bak  spfilePROD1.ora.bak<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORACLE instance started.Total <span class="hljs-keyword">System</span> <span class="hljs-keyword">Global</span> Area <span class="hljs-number">1073741824</span> bytesFixed Size                  <span class="hljs-number">8628936</span> bytesVariable Size             <span class="hljs-number">671089976</span> bytesDatabase Buffers          <span class="hljs-number">390070272</span> bytesRedo Buffers                <span class="hljs-number">3952640</span> bytes<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> <span class="hljs-keyword">parameter</span> spfileNAME                                 TYPE                   <span class="hljs-keyword">VALUE</span><span class="hljs-comment">------------------------------------ ---------------------- ------------------------------</span>spfile                               string</code></pre></div><p>使用spfile文件启动数据库时，无论是show parameter spfile和show parameter pfile都能看到spfile文件的信息；</p><p>使用pfile文件启动数据库时，无论是show parameter spfile和show parameter pfile都不能看到pfile文件的信息。</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- 将init&lt;SID&gt;.ora文件更名再启动数据库</span>[oracle<span class="hljs-variable">@test</span> dbs]$ lshc_PROD1.dat  init.ora  initPROD1.ora.bak  lkORCL  orapwPROD1  snapcf_PROD1.f  spfile.ora.bak  spfilePROD1.ora.bak<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORA<span class="hljs-number">-01078</span>: failure <span class="hljs-keyword">in</span> processing <span class="hljs-keyword">system</span> parametersLRM<span class="hljs-number">-00109</span>: could <span class="hljs-keyword">not</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">parameter</span> file <span class="hljs-string">&#x27;/u01/app/oracle/product/12.2.0/db_1/dbs/initPROD1.ora&#x27;</span></code></pre></div><p>可以看到，在找不到这三个文件时，Oracle无法创建和启动实例。</p><p><strong>记错：</strong></p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startupORA<span class="hljs-number">-01261</span>: <span class="hljs-keyword">Parameter</span> db_recovery_file_dest destination string cannot be translatedORA<span class="hljs-number">-01262</span>: Stat failed <span class="hljs-keyword">on</span> a file destination directoryLinux<span class="hljs-operator">-</span>x86_64 Error: <span class="hljs-number">2</span>: <span class="hljs-keyword">No</span> such file <span class="hljs-keyword">or</span> directory</code></pre></div><p>原因：无法识别这种路径</p><p><img src="../images/image-20200908215057440.png" alt="image-20200908215057440"></p><ul><li><input checked="" disabled="" type="checkbox"> 解决办法：更改为绝对路径</li></ul><h5 id="启动数据库到MOUNT状态"><a href="#启动数据库到MOUNT状态" class="headerlink" title="启动数据库到MOUNT状态"></a>启动数据库到MOUNT状态</h5><p>在NOMOUNT状态下，Oracle可以从参数文件中获得控制文件的位置信息，在该状态下通过show parameter可以查看控制文件信息；在MOUNT状态下，可以通过v$controlfile视图查看。</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- NOMOUNT状态下查看控制文件信息</span><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup nomountORACLE instance started.Total <span class="hljs-keyword">System</span> <span class="hljs-keyword">Global</span> Area <span class="hljs-number">1660944384</span> bytesFixed Size    <span class="hljs-number">8793448</span> bytesVariable Size <span class="hljs-number">1056965272</span> bytesDatabase Buffers  <span class="hljs-number">587202560</span> bytesRedo Buffers    <span class="hljs-number">7983104</span> bytes<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">show</span> <span class="hljs-keyword">parameter</span> control_fileNAME     TYPE    <span class="hljs-keyword">VALUE</span><span class="hljs-comment">------------------------------------ ---------------------- ------------------------------</span>control_file_record_keep_time     <span class="hljs-type">integer</span>    <span class="hljs-number">7</span>control_files     string    <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>oradata<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>c    ontrol01.ctl, <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>    fast_recovery_area<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>contro    l02.ctl</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-comment">-- MOUNT状态下查看控制文件信息</span><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> startup mountORACLE instance started.Total <span class="hljs-keyword">System</span> <span class="hljs-keyword">Global</span> Area <span class="hljs-number">1660944384</span> bytesFixed Size    <span class="hljs-number">8793448</span> bytesVariable Size <span class="hljs-number">1056965272</span> bytesDatabase Buffers  <span class="hljs-number">587202560</span> bytesRedo Buffers    <span class="hljs-number">7983104</span> bytesDatabase mounted.<span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> status, name <span class="hljs-keyword">from</span> v$controlfile;STATUS       NAME<span class="hljs-comment">-------------- ------------------------------</span>       <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>oradata<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>c       ontrol01.ctl       <span class="hljs-operator">/</span>u01<span class="hljs-operator">/</span>app<span class="hljs-operator">/</span>oracle<span class="hljs-operator">/</span>fast_recovery_       area<span class="hljs-operator">/</span>orcl<span class="hljs-operator">/</span>control02.ctl</code></pre></div><p>在数据库MOUNT过程中，Oracle会找到并锁定控制文件，如果控制文件全部丢失则会报错。</p><p>在MOUNT过程中，警报日志会记录下mount id信息，数据库需要计算mount id并记录在控制文件中，然后启动Heartbeat，每3秒更新一次控制文件。</p><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">2020</span>-<span class="hljs-number">09</span>-<span class="hljs-number">10</span>T<span class="hljs-number">15</span>:<span class="hljs-number">59</span>:<span class="hljs-number">16</span>.<span class="hljs-number">553750</span>+<span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-attribute">Successful</span> mount of redo thread <span class="hljs-number">1</span>, with mount id <span class="hljs-number">1578911952</span><span class="hljs-attribute">2020</span>-<span class="hljs-number">09</span>-<span class="hljs-number">10</span>T<span class="hljs-number">15</span>:<span class="hljs-number">59</span>:<span class="hljs-number">16</span>.<span class="hljs-number">554061</span>+<span class="hljs-number">08</span>:<span class="hljs-number">00</span><span class="hljs-attribute">Database</span> mounted in Exclusive Mode<span class="hljs-attribute">Lost</span> write protection disabled</code></pre></div><p>可以通过查询X$KCCCP查询到当前的Heartbeat值</p><div class="hljs code-wrapper"><pre><code class="hljs sql"><span class="hljs-keyword">SQL</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> CPHBT <span class="hljs-keyword">from</span> X$KCCCP;     CPHBT<span class="hljs-comment">----------</span><span class="hljs-number">1051097643</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span><span class="hljs-number">8</span> <span class="hljs-keyword">rows</span> selected.</code></pre></div><p>启动到MOUNT状态时，数据库必备的另一个重要文件是口令文件，口令文件位于$ORACLE_HOME/dbs目录下，默认名称为orapw<SID>。</p><div class="hljs code-wrapper"><pre><code class="hljs sql">[oracle<span class="hljs-variable">@test</span> dbs]$ strings orapwPROD1]\[ZORACLE Remote Password fileSYSDGI<span class="hljs-operator">-</span>RHi<span class="hljs-operator">+</span>EX\SYSBACKUPPKS<span class="hljs-operator">|</span>fts6 $<span class="hljs-number">9</span>SYSKM\Lp<span class="hljs-operator">+</span></code></pre></div><p>通过口令文件，Oracle可以对用户的身份进行认证，在数据库未启动之前登录，从而启动数据库。</p><h5 id="启动数据库到OPEN状态"><a href="#启动数据库到OPEN状态" class="headerlink" title="启动数据库到OPEN状态"></a>启动数据库到OPEN状态</h5><p>在控制文件中记录了数据库的数据文件位置信息、日志文件位置信息、检查点信息等重要信息，在此阶段，Oracle根据控制文件中记录的这些信息找到这些文件，进行检查点和完整性检查。除此之外，数据文件和联机重做日志文件已打开并可以使用。 如果任何数据文件或联机重做日志文件丢失或损坏，将无法打开数据库。</p><h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><h6 id="NOMOUNT"><a href="#NOMOUNT" class="headerlink" title="NOMOUNT"></a>NOMOUNT</h6><ul><li>读取参数文件</li><li>分配SGA</li><li>启动后台进程</li><li>仅运行SGA和后台进程</li><li>用于创建数据库</li></ul><h6 id="MOUNT"><a href="#MOUNT" class="headerlink" title="MOUNT"></a>MOUNT</h6><ul><li>读取参数文件</li><li>分配SGA</li><li>启动后台进程</li><li>读取控制文件</li><li>运行SGA和后台进程以及打开控制文件</li><li>用于数据库维护和恢复操作</li></ul><p>OPEN</p><ul><li>读取参数文件</li><li>分配SGA</li><li>启动后台进程</li><li>读取控制文件</li><li>打开所有数据库文件</li><li>运行SGA和后台进程、打开控制文件和所有数据库文件</li></ul><hr><h4 id="数据库恢复知识"><a href="#数据库恢复知识" class="headerlink" title="数据库恢复知识"></a>数据库恢复知识</h4><p>恢复数据文件或控制文件的物理备份即是对其进行重构亦使得它可以用于Oracle数据库；</p><p>恢复已修复的数据文件是通过归档重做日志文件和联机重做日志文件对其进行更新，就是在进行备份后对数据库的更改记录；</p><p>通过RMAN还可以使用增量备份恢复数据文件，增量备份仅包含在先前增量备份之后更改的块的数据文件的备份；</p><p>在还原数据库必要的文件后，用户必须启动介质恢复，介质恢复通过各种操作以还原、前滚和回滚数据库文件的备份；</p><p>介质恢复应用归档重做日志和联机重做日志来恢复数据文件； 每当对数据文件进行更改时，该更改都会首先记录在联机重做日志中； 介质恢复有选择地将在线和存档重做日志中记录的更改应用于还原的数据文件以将其前滚；</p><p>与介质恢复不同，Oracle在实例故障后自动执行崩溃恢复和实例恢复。 崩溃恢复和实例恢复将数据库恢复到实例失败之前的事务一致状态。</p><p>崩溃恢复是指所有实例都崩溃的单实例配置或Oracle Real Application Clusters配置中的数据库恢复；而实例恢复是通过Oracle Real Application Clusters配置中的活动实例恢复一个失败的实例。</p><h5 id="介质恢复"><a href="#介质恢复" class="headerlink" title="介质恢复"></a>介质恢复</h5><p>介质恢复是指需要备份并应用重做的恢复类型。</p><p>介质恢复会将备份更新为当前备份或指定的时间之前；一般情况下，media recovery指的是数据文件的恢复，block media recovery指的是一个或多个文件中只有几个块被破坏时的操作。</p><h6 id="完全恢复"><a href="#完全恢复" class="headerlink" title="完全恢复"></a>完全恢复</h6><p>完全恢复涉及将重做数据或增量备份与数据库表空间或数据文件的备份结合使用，以将其更新到最新的时间点。 Oracle将已归档和联机日志中包含的所有重做更改应用于备份。 在介质故障损坏数据文件或控制文件后将执行完全恢复。</p><p>如果对整个数据库进行完全恢复，必须满足：</p><ul><li>挂载数据库</li><li>确保要恢复的所有数据文件都处于联机状态</li><li>还原整个数据库或需要恢复的文件的备份</li><li>应用在线或存档的重做日志，或两者结合</li></ul><p>如果要对表空间或数据文件执行完全恢复，必须满足：</p><ul><li>如果数据库处于open状态，则使表空间或数据文件脱机以使其恢复</li><li>还原需要恢复的数据文件的备份</li><li>应用在线或存档的重做日志，或两者结合</li></ul><h6 id="不完全恢复"><a href="#不完全恢复" class="headerlink" title="不完全恢复"></a>不完全恢复</h6><p>不完全恢复是指将数据库恢复到非当前时刻的状态，即只应用部分归档或联机重做日志，通过指定SCN或时间点，将数据库恢复到指定时间的状态，</p><p>不完全恢复适用情况：</p><ul><li>介质故障导致部分联机重做日志不可用</li><li>用户误删数据，无法使用逻辑方式恢复</li><li>丢失部分归档日志，无法进行完全恢复</li><li>控制文件丢失，只能以备份的控制文件打开数据库</li></ul><p>要进行不完全恢复，必须有在要恢复的时间点之前创建的备份；通过创建的备份恢复所有数据文件，然后应用重做日志到指定的时间点，以open resetlogs模式打开数据库。</p><p>结束标志：</p><ul><li>基于时间：指定的时间点</li><li>基于SCN：指定的SCN</li><li>基于CANCEL：用户主动取消</li><li>基于日志序号：指定的归档文件序号</li></ul><h5 id="崩溃恢复"><a href="#崩溃恢复" class="headerlink" title="崩溃恢复"></a>崩溃恢复</h5><p>崩溃恢复由Oracle自动进行，通过读取当前的数据文件和联机重做日志文件来恢复数据库，使数据文件和控制文件恢复到崩溃前的一致性状态。</p><h6 id="第一步：缓存恢复"><a href="#第一步：缓存恢复" class="headerlink" title="第一步：缓存恢复"></a>第一步：缓存恢复</h6><p>Oracle启动实例并加载数据库，通过重做日志重新执行实例崩溃前对数据库的修改操作，在恢复过程中对已经提交的事务，但未写入数据文件的数据全部写入数据文件，这个过程就是Rolling Forward；</p><h6 id="第二步：事务恢复"><a href="#第二步：事务恢复" class="headerlink" title="第二步：事务恢复"></a>第二步：事务恢复</h6><p>前滚后，已经提交的修改操作更改的数据都写入到了数据文件；但在实例崩溃时，部分未提交的事务操作的数据也被写入到了数据文件，而这些事务必须被撤销，这个过程就是Rolling Back，回滚。</p><h5 id="恢复操作"><a href="#恢复操作" class="headerlink" title="恢复操作"></a>恢复操作</h5><p>数据库的恢复操作可以分为修复（RESTORE）和恢复（RECOVER）两个步骤；</p><p>RESTORE是指将要恢复的文件从备份中读取出来，保存到指定路径；</p><p>RECOVER是指应用重做日志，将数据库恢复到崩溃前的状态或指定的时间点。</p><p><img src="https://docs.oracle.com/cd/B19306_01/server.102/b14220/img/cncpt207.gif" alt="Description of Figure 15-2 follows"></p><p>如图，在SCN 100上对数据库进行了备份。在SCN 600上发生了介质故障。从SCN 100到SCN 600的时间范围内的重做日志已被存档以用于恢复。 SCN 100的备份将还原或复制到新介质上。 重做日志用于恢复数据库，再次执行在备份和介质故障点之间发生的每个数据库更改。</p><h5 id="Flashback"><a href="#Flashback" class="headerlink" title="Flashback"></a>Flashback</h5><p>使用Flashback可以更正由逻辑数据损坏或用户操作错误引起的问题，闪回数据库和闪回表可以快速恢复到之前的时间状态。</p><h6 id="Flashback-database"><a href="#Flashback-database" class="headerlink" title="Flashback database"></a>Flashback database</h6><p>如果配置了 Flash Recovery Area的Oracle托管磁盘区域，并且启用了闪回功能，则可以使用RMAN和SQL FLASHBACK DATABASE命令将数据库返回到之前的时间状态。 闪回数据库不是真正的媒体恢复，因为它不涉及还原物理文件。 但是在某些情况下，Flash比使用RESTORE和RECOVER命令更值得选择，因为它更快更容易，并且不需要还原整个数据库。</p><h6 id="Flashback-Table"><a href="#Flashback-Table" class="headerlink" title="Flashback Table"></a>Flashback Table</h6><p>Flashback Table可以通过一条语句将表恢复到指定的时间点。当数据库处于联机状态时，可以还原表数据以及关联的索引、触发器和约束，仅撤消对指定表的更改。Flashback Table不能解决物理损坏；例如磁盘损坏或数据段与索引不一致。</p><p>Flashback Table的工作方式类似于自助修复工具。 假设用户不小心从表中删除了一些重要的行，并且想要恢复已删除的行。可以将表还原到删除之前的时间，然后使用FLASHBACK TABLE语句查看表中缺少的行。</p><p>用户可以将表及其内容还原为特定的时间点或指定的SCN。将Flashback Table与Oracle闪回版本查询和闪回事务查询一起使用，可以找到将表还原到的时间。</p><h5 id="常见备份与恢复技术"><a href="#常见备份与恢复技术" class="headerlink" title="常见备份与恢复技术"></a>常见备份与恢复技术</h5><h6 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h6><p>没有提供RMAN之前的物理备份方式。现在已经很少使用这种方式进行备份和恢复。</p><h6 id="RMAN"><a href="#RMAN" class="headerlink" title="RMAN"></a>RMAN</h6><p>RMAN的操作由Oracle的服务进程操作，DBA只需要指定方式、内容、存储路径等信息，剩下的则有RMAN自动完成。</p><p>目前使用较多的方式。</p><h6 id="EXP-IMP和Data-Pump"><a href="#EXP-IMP和Data-Pump" class="headerlink" title="EXP/IMP和Data Pump"></a>EXP/IMP和Data Pump</h6><p>逻辑备份主要是备份数据、导出表、过程等对象到一个二进制文件中；这种方式因为只导出逻辑数据，所以相较于物理备份更节省磁盘空间。</p><h6 id="Flashback-1"><a href="#Flashback-1" class="headerlink" title="Flashback"></a>Flashback</h6><ul><li>闪回查询：通过查询UNDO段，重现操作之前的数据</li><li>闪回表：默认情况下表对象及与其相关联的索引等对象在DROP后并没有物理删除，而是标记为删除，只需要简单的命令就可以对这类表进行恢复，并且该操作只修改数据字典，不管要恢复的对象占用多大空间，恢复效率极高</li><li>闪回数据库：实现了不需要备份（由Oracle自动进行，不需要DBA操作）的恢复。</li></ul><hr>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/05/05/hello-world/"/>
    <url>/2021/05/05/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span></code></pre></div><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo server</code></pre></div><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo generate</code></pre></div><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo deploy</code></pre></div><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
  
  
  <entry>
    <title>about</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[<p>###this is the test about</p>]]></content>
    
  </entry>
  
  
  
</search>
